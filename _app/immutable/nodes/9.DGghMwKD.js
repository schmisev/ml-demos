import"../chunks/DsnmJJEf.js";import{o as ea}from"../chunks/Cnrimmix.js";import{p as ta,s as P,a as le,g as e,h as A,f as S,c as r,b as a,t as I,d as w,e as aa,r as o,j as Me,k as ne,n as oa,l as ra,m as Ne}from"../chunks/4GbpYj1Z.js";import{d as ia,s as u}from"../chunks/BtTk71Kd.js";import{i as de}from"../chunks/C-F78KSZ.js";import{e as Q,i as Z}from"../chunks/C_cjGUXz.js";import{r as sa}from"../chunks/CG_wtlq_.js";import{s as L}from"../chunks/B00MqyoI.js";import{a as la}from"../chunks/D7mxgv5f.js";import{b as ve}from"../chunks/D_ZpHD7y.js";import{b as na}from"../chunks/1gkgI-oG.js";import{a as Pt,r as Bt,g as da}from"../chunks/CK5eLMkr.js";import{n as Et,N as _e,O as je,S as Ft,a as Lt,B as Ct,b as Dt,c as Mt,A as Nt,D as jt,I as zt,d as Gt,e as Ht,G as Ut}from"../chunks/B3C_DtJu.js";import{v as ce,a as ze,b as C,c as D,d as pe,e as va,f as _a}from"../chunks/D5MljCm_.js";var ca=(ee,B,f)=>{B(),f()},pa=(ee,B,f)=>{B(),f()},ua=(ee,B,f,M)=>{B(e(f)),M()},fa=S("<option> </option>"),ba=S("<option> </option>"),ha=S('<tr><td class="w-4">●</td><td> </td><td><b style="color: lightcoral;"> </b>+<b style="color: blueviolet;"> </b></td><td>=</td><td> </td></tr>'),ga=S('<tr><td class="w-4">●</td><td> </td><td> </td></tr>'),ma=S('<div><b>GOAL ●</b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ ···</div>',1),xa=S("<div><b>START ●</b> </div>"),ya=S('<div><b>GOAL REACHED ●</b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ <span class="text-xs"> <b> </b></span></div>',1),wa=S('<div><b> </b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ <span class="text-xs"> <b> </b></span></div>',1),Sa=S('<div class="flex flex-col"><!></div>'),ka=S("<div><b>START ●</b> </div>"),Ra=S('<div class="grid grid-cols-2 gap-2 p-2"><div class="flex flex-col gap-2"><h1>Search algorithms | <a href="../">back</a></h1> <div class="flex flex-row items-center gap-2 flex-wrap"><button class="border">Random restart</button> <button class="border">Random solve</button> <button class="border">Random autostep</button> <select><option>binary tree</option><option>Romania</option></select> <label>show undiscovered <input type="checkbox"/></label></div> <canvas class="w-full"></canvas></div> <div class="flex grow flex-col gap-2"><div class="flex flex-row gap-2"><button class="border">Restart</button> <button class="border">Step</button> <button class="border">Solve</button> <button class="border">Autostep</button> <select><optgroup label="Breadth first"><option>naive breadth first</option></optgroup><optgroup label="Best first"><option>best first (Dijkstra)</option> <option>greedy best first</option> <option>A* geo distance</option></optgroup><optgroup label="Depth first"><option>naive depth first</option></optgroup><optgroup label="Iterative deepening"><option>iterative deepening</option> <option>optimistic lookahead</option> <option>dead branch pruning</option> <option>optimistic heuristic</option> <option>greedy heuristic</option></optgroup></select></div> <div class="flex flex-row items-center gap-2"><select></select> <div>→</div> <select></select></div> <div class="light-border flex flex-row gap-2"><div class="border-r-2 pr-2">Steps: <b> </b></div> <div class="border-r-2 pr-2">Maximal frontier size: <b> </b></div> <div>Reached size: <b> </b></div></div> <div class="start flex flex-row items-start justify-evenly gap-2"><div class="light-border flex w-1/3 flex-col gap-2"><h2>frontier</h2> <table><tbody></tbody></table></div> <div class="light-border flex w-1/3 flex-col gap-2"><h2>reached</h2> <table><tbody></tbody></table></div> <div class="light-border flex h-full w-1/3 flex-col gap-2"><h2>current path</h2> <div class="flex grow flex-col"><!> <!> <!></div></div></div></div></div>');function ja(ee,B){ta(B,!0);let f,M=P(le(_e)),N=P(!0),G=700,H=700,te=P(0),ae=P(10),g,U=_e,x,ue,E=P(le(Et(U)));Ge(e(M));function Ge(s){U=s,g=s.physics,x=U.nodes.map(d=>({node:d,pos:ce(Bt(G/4,3*G/4),Bt(H/4,3*H/4)),vel:ce(0,0),grabbed:!1,hovered:!1,discovered:!1})),ue=U.links.map(d=>d),A(E,Et(U),!0)}let oe=P(le(je)),n=P(le(new(e(oe))));function W(){A(te,Pt(0,e(E).length),!0),A(ae,Pt(0,e(E).length),!0),K()}function Wt(){for(const s of x)s.discovered=!1}function K(){Wt(),A(n,new(e(oe)),!0),e(n).start(e(E)[e(te)],e(E)[e(ae)])}function He(){const s=e(n).step();e(n).trace_path(),(s===Ft.SUCCESS||s===Ft.FAILURE)&&e(Y)&&be()}function Ue(){e(n).solve(),e(n).trace_path()}let Y=P(!1),fe;function be(){A(Y,!e(Y)),e(Y)?fe=setInterval(He,100):fe!==void 0&&clearInterval(fe)}ea(()=>{let s=ce(),d=!1,v=!1;f.onpointermove=c=>{s=da(f,c)},f.onpointerdown=c=>{f.setPointerCapture(c.pointerId),d=!0,v=!0},f.onpointerup=c=>{f.releasePointerCapture(c.pointerId),v=!1},f.width=G,f.height=H;const t=f.getContext("2d");function _(c,b){return _a(c,b.pos)<g.node_radius*2}function p(){let c,b=0;function j(y){c&&(b=Math.min(.02,(y-c)/1e3)),c=y;const m=x.map(i=>({x:0,y:0}));for(const i of ue){const l=ze(x[i.source].pos,x[i.target].pos),h=pe(l),R=(i.weight*g.zoom-h)*g.spring_stiffness;C(m[i.source],D(l,R/pe(l))),C(m[i.target],D(l,-R/pe(l)))}for(const[i,l]of x.entries()){!l.discovered&&e(n).discovered.has(l.node.id)&&(l.discovered=!0);const h=ce(G/2,H/2),R=ze(h,l.pos);C(m[i],D(R,g.center_pull));for(const[$,T]of x.entries())if(i<$){const F=ze(l.pos,T.pos),z=pe(F),O=g.node_charge/(1+z)**2;C(m[i],D(F,O)),C(m[$],D(F,-O))}}let k=!1;for(const[i,l]of x.entries())!k&&_(s,l)?(d&&(l.grabbed=!0),l.hovered=!0,k=!0):l.hovered=!1,v||(l.grabbed=!1),(e(N)||l.discovered)&&l.grabbed&&v?l.pos=s:(va(l.vel,1-g.drag),C(l.vel,D(m[i],b)),C(l.pos,D(l.vel,b*g.speed)));t.clearRect(0,0,G,H);for(const i of ue){const l=x[i.source],h=x[i.target];t.save(),(e(N)||l.discovered&&h.discovered)&&(e(n).link_path.includes(i.id)&&(t.strokeStyle="lightcoral",t.lineWidth=4),t.beginPath(),t.moveTo(l.pos.x,l.pos.y),t.lineTo(h.pos.x,h.pos.y),t.stroke()),t.restore()}t.save(),t.shadowBlur=5,t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowColor="rgba(0, 0, 0, 0.2)";for(const i of x){t.fillStyle="white";const l=e(n).is_in_frontier(i.node.id);e(n).current&&e(n).current.state.node.id===i.node.id?e(n).goal&&e(n).goal.node.id===i.node.id?t.fillStyle="green":t.fillStyle="red":e(n).node_path.includes(i.node.id)?t.fillStyle="lightcoral":e(n).goal&&e(n).goal.node.id===i.node.id?t.fillStyle="lightgreen":l?t.fillStyle="lightblue":e(n).reached.has(i.node.id)?t.fillStyle="black":e(n).branch_roots.has(i.node.id)&&(t.fillStyle="orange"),(e(N)||i.discovered)&&(t.beginPath(),t.ellipse(i.pos.x,i.pos.y,g.node_radius,g.node_radius,0,0,Math.PI*2),t.stroke(),t.fill(),i.grabbed&&(t.beginPath(),t.ellipse(i.pos.x,i.pos.y,g.node_radius*2,g.node_radius*2,0,0,Math.PI*2),t.stroke()),t.save(),(i.hovered||i.grabbed)&&(t.beginPath(),t.fillStyle="yellow",t.ellipse(i.pos.x,i.pos.y,g.node_radius,g.node_radius,0,0,Math.PI*2),t.fill()),t.restore())}t.restore(),t.textAlign="center",t.textBaseline="middle",t.save();for(const i of x)(e(N)||i.discovered)&&t.fillText(i.node.name,i.pos.x,i.pos.y-g.node_radius*2);t.restore(),d=!1,requestAnimationFrame(j)}j(0)}p()}),W();var he=Ra(),ge=r(he),me=a(r(ge),2),We=r(me);We.__click=W;var Ke=a(We,2);Ke.__click=[ca,W,Ue];var Ye=a(Ke,2);Ye.__click=[pa,W,be];var q=a(Ye,2);q.__change=[ua,Ge,M,W];var xe=r(q),qe={},Ve=a(xe),Xe={};o(q);var Je=a(q,2),Qe=a(r(Je));sa(Qe),o(Je),o(me);var Kt=a(me,2);na(Kt,s=>f=s,()=>f),o(ge);var Ze=a(ge,2),ye=r(Ze),et=r(ye);et.__click=K;var tt=a(et,2);tt.__click=He;var at=a(tt,2);at.__click=Ue;var we=a(at,2);we.__click=be;var re=a(we,2);re.__change=K;var Se=r(re),ot=r(Se),rt={};o(Se);var ke=a(Se),Re=r(ke),it={},$e=a(Re,2),st={},lt=a($e,2),nt={};o(ke);var Ae=a(ke),dt=r(Ae),vt={};o(Ae);var _t=a(Ae),Ie=r(_t),ct={},Te=a(Ie,2),pt={},Oe=a(Te,2),ut={},Pe=a(Oe,2),ft={},bt=a(Pe,2),ht={};o(_t),o(re),o(ye);var Be=a(ye,2),V=r(Be);V.__change=K,Q(V,21,()=>e(E).entries(),Z,(s,d)=>{var v=Me(()=>Ne(e(d),2));let t=()=>e(v)[0],_=()=>e(v)[1];var p=fa(),c=r(p);o(p);var b={};I(()=>{u(c,`${_().node.id??""} : ${_().node.name??""}`),b!==(b=t())&&(p.value=(p.__value=t())??"")}),w(s,p)}),o(V);var ie=a(V,4);ie.__change=K,Q(ie,21,()=>e(E).entries(),Z,(s,d)=>{var v=Me(()=>Ne(e(d),2));let t=()=>e(v)[0],_=()=>e(v)[1];var p=ba(),c=r(p);o(p);var b={};I(()=>{u(c,`${_().node.id??""} : ${_().node.name??""}`),b!==(b=t())&&(p.value=(p.__value=t())??"")}),w(s,p)}),o(ie),o(Be);var Ee=a(Be,2),Fe=r(Ee),gt=a(r(Fe)),Yt=r(gt,!0);o(gt),o(Fe);var Le=a(Fe,2),mt=a(r(Le)),qt=r(mt,!0);o(mt),o(Le);var xt=a(Le,2),yt=a(r(xt)),Vt=r(yt,!0);o(yt),o(xt),o(Ee);var wt=a(Ee,2),Ce=r(wt),St=a(r(Ce),2),kt=r(St);Q(kt,21,()=>e(n).frontier,Z,(s,d)=>{var v=ha(),t=r(v);L(t,"color: lightblue");var _=a(t),p=r(_,!0);o(_);var c=a(_),b=r(c),j=r(b,!0);o(b);var y=a(b,2),m=r(y,!0);o(y),o(c);var k=a(c,2),i=r(k,!0);o(k),o(v),I((l,h)=>{u(p,e(d).state.node.name),u(j,e(d).path_cost),u(m,l),u(i,h)},[()=>e(d).heuristic.toFixed(1),()=>(e(d).path_cost+e(d).heuristic).toFixed(1)]),w(s,v)}),o(kt),o(St),o(Ce);var De=a(Ce,2),Rt=a(r(De),2),$t=r(Rt);Q($t,21,()=>e(n).reached.values(),Z,(s,d)=>{var v=ga(),t=a(r(v)),_=r(t,!0);o(t);var p=a(t),c=r(p,!0);o(p),o(v),I(()=>{u(_,e(d).state.node.name),u(c,e(d).path_cost)}),w(s,v)}),o($t),o(Rt),o(De);var At=a(De,2),It=a(r(At),2),Tt=r(It);{var Xt=s=>{var d=ma(),v=ne(d),t=r(v);L(t,"color: lightgreen");var _=a(t);o(v),oa(2),I(()=>u(_,` ${e(n).goal?.node.name??""}`)),w(s,d)};de(Tt,s=>{e(n).current?.state.node.id!==e(n).goal?.node.id&&s(Xt)})}var Ot=a(Tt,2);Q(Ot,17,()=>e(n).full_path.entries(),Z,(s,d)=>{var v=Me(()=>Ne(e(d),2));let t=()=>e(v)[0],_=()=>e(v)[1];var p=Sa(),c=r(p);{var b=y=>{var m=xa(),k=r(m),i=a(k);o(m),I(()=>{L(k,`color: ${t()===0?"red":"lightcoral"}`),u(i,` ${_().state.node.name??""}`)}),w(y,m)},j=y=>{var m=ra(),k=ne(m);{var i=h=>{var R=ya(),$=ne(R),T=r($);L(T,"color: green");var F=a(T);o($);var z=a($,2),O=a(r(z)),X=r(O),J=a(X),se=r(J,!0);o(J),o(O),o(z),I(()=>{u(F,` ${_().state.node.name??""}`),u(X,`+${(_().action?.weight||0)??""} = `),u(se,_().path_cost)}),w(h,R)},l=h=>{var R=wa(),$=ne(R),T=r($),F=r(T);o(T);var z=a(T);o($);var O=a($,2),X=a(r(O)),J=r(X),se=a(J),Zt=r(se,!0);o(se),o(X),o(O),I(()=>{L(T,`color: ${t()===0?"red":"lightcoral"}`),u(F,`${t()===0?"CURRENT":""} ●`),u(z,` ${_().state.node.name??""}`),u(J,`+${(_().action?.weight||0)??""} = `),u(Zt,_().path_cost)}),w(h,R)};de(k,h=>{t()===0&&e(n).goal?.node.id===e(n).current?.state.node.id?h(i):h(l,!1)},!0)}w(y,m)};de(c,y=>{t()===e(n).full_path.length-1?y(b):y(j,!1)})}o(p),w(s,p)});var Jt=a(Ot,2);{var Qt=s=>{var d=ka(),v=r(d);L(v,"color: red");var t=a(v);o(d),I(()=>u(t,` ${(e(n).current?.state.node.name||"no start node")??""}`)),w(s,d)};de(Jt,s=>{e(n).full_path.length===0&&s(Qt)})}o(It),o(At),o(wt),o(Ze),o(he),I(()=>{qe!==(qe=Lt)&&(xe.value=(xe.__value=Lt)??""),Xe!==(Xe=_e)&&(Ve.value=(Ve.__value=_e)??""),L(we,`${e(Y)?"background-color: lightcoral":""};`),rt!==(rt=Ct)&&(ot.value=(ot.__value=Ct)??""),it!==(it=Dt)&&(Re.value=(Re.__value=Dt)??""),st!==(st=Mt)&&($e.value=($e.__value=Mt)??""),nt!==(nt=Nt)&&(lt.value=(lt.__value=Nt)??""),vt!==(vt=jt)&&(dt.value=(dt.__value=jt)??""),ct!==(ct=zt)&&(Ie.value=(Ie.__value=zt)??""),pt!==(pt=je)&&(Te.value=(Te.__value=je)??""),ut!==(ut=Gt)&&(Oe.value=(Oe.__value=Gt)??""),ft!==(ft=Ht)&&(Pe.value=(Pe.__value=Ht)??""),ht!==(ht=Ut)&&(bt.value=(bt.__value=Ut)??""),u(Yt,e(n).step_count),u(qt,e(n).frontier_size),u(Vt,e(n).reached_size)}),ve(q,()=>e(M),s=>A(M,s)),la(Qe,()=>e(N),s=>A(N,s)),ve(re,()=>e(oe),s=>A(oe,s)),ve(V,()=>e(te),s=>A(te,s)),ve(ie,()=>e(ae),s=>A(ae,s)),w(ee,he),aa()}ia(["click","change"]);export{ja as component};

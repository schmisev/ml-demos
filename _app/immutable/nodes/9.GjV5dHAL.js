import"../chunks/DsnmJJEf.js";import{o as va}from"../chunks/Cnrimmix.js";import{p as da,s as O,a as le,g as e,h as $,f as S,c as r,b as a,t as I,d as w,e as _a,r as o,j as je,k as ne,n as ca,l as pa,m as ze}from"../chunks/4GbpYj1Z.js";import{d as ua,s as u}from"../chunks/BtTk71Kd.js";import{i as ve}from"../chunks/C-F78KSZ.js";import{e as Q,i as Z}from"../chunks/C_cjGUXz.js";import{r as fa}from"../chunks/CG_wtlq_.js";import{s as P}from"../chunks/B00MqyoI.js";import{a as ba}from"../chunks/D7mxgv5f.js";import{b as de}from"../chunks/D_ZpHD7y.js";import{b as ha}from"../chunks/1gkgI-oG.js";import{a as Ct,r as Ft,g as ga}from"../chunks/CK5eLMkr.js";import{n as Dt,N as _e,O as He,S as Gt,a as jt,b as zt,c as Ht,B as Wt,d as Kt,e as Ut,A as Yt,f as qt,D as Vt,I as Xt,g as Jt,h as Qt,G as Zt}from"../chunks/pCU-sVIE.js";import{v as ce,a as We,b as B,c as C,d as pe,e as ma,f as xa}from"../chunks/D5MljCm_.js";var ya=(ee,M,f)=>{M(),f()},wa=(ee,M,f)=>{M(),f()},Sa=(ee,M,f,F)=>{M(e(f)),F()},ka=S("<option> </option>"),Ra=S("<option> </option>"),Aa=S('<tr><td class="w-4">●</td><td> </td><td><b style="color: lightcoral;"> </b>+<b style="color: blueviolet;"> </b></td><td>=</td><td> </td></tr>'),$a=S('<tr><td class="w-4">●</td><td> </td><td> </td></tr>'),Ia=S('<div><b>GOAL ●</b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ ···</div>',1),Ta=S("<div><b>START ●</b> </div>"),Ea=S('<div><b>GOAL REACHED ●</b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ <span class="text-xs"> <b> </b></span></div>',1),Oa=S('<div><b> </b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ <span class="text-xs"> <b> </b></span></div>',1),Ma=S('<div class="flex flex-col"><!></div>'),La=S("<div><b>START ●</b> </div>"),Na=S('<div class="grid grid-cols-2 gap-2 p-2"><div class="flex flex-col gap-2"><h1>Search algorithms | <a href="../">back</a></h1> <div class="flex flex-row items-center gap-2 flex-wrap"><button class="border">Random restart</button> <button class="border">Random solve</button> <button class="border">Random autostep</button> <select><option>binary tree</option><option>Romania</option><option>Germany</option><option>Munich</option></select> <label>show undiscovered <input type="checkbox"/></label></div> <canvas class="w-full"></canvas></div> <div class="flex grow flex-col gap-2"><div class="flex flex-row gap-2"><button class="border">Restart</button> <button class="border">Step</button> <button class="border">Solve</button> <button class="border">Autostep</button> <select><optgroup label="Breadth first"><option>naive breadth first</option></optgroup><optgroup label="Best first"><option>best first (Dijkstra)</option> <option>greedy best first</option> <option>A* geo distance</option> <option>A* straight line minutes</option></optgroup><optgroup label="Depth first"><option>naive depth first</option></optgroup><optgroup label="Iterative deepening"><option>iterative deepening</option> <option>optimistic lookahead</option> <option>dead branch pruning</option> <option>optimistic heuristic</option> <option>greedy heuristic</option></optgroup></select></div> <div class="flex flex-row items-center gap-2"><select></select> <div>→</div> <select></select></div> <div class="light-border flex flex-row gap-2"><div class="border-r-2 pr-2">Steps: <b> </b></div> <div class="border-r-2 pr-2">Maximal frontier size: <b> </b></div> <div>Reached size: <b> </b></div></div> <div class="start flex flex-row items-start justify-evenly gap-2"><div class="light-border flex w-1/3 flex-col gap-2"><h2>frontier</h2> <table><tbody></tbody></table></div> <div class="light-border flex w-1/3 flex-col gap-2"><h2>reached</h2> <table><tbody></tbody></table></div> <div class="light-border flex h-full w-1/3 flex-col gap-2"><h2>current path</h2> <div class="flex grow flex-col"><!> <!> <!></div></div></div></div></div>');function Va(ee,M){da(M,!0);let f,F=O(le(_e)),D=O(!0),z=700,H=700,te=O(0),ae=O(10),g,W=_e,x,ue,L=O(le(Dt(W)));Ke(e(F));function Ke(s){W=s,g=s.physics,x=W.nodes.map(v=>({node:v,pos:ce(Ft(z/4,3*z/4),Ft(H/4,3*H/4)),vel:ce(0,0),grabbed:!1,hovered:!1,discovered:!1})),ue=W.links.map(v=>v),$(L,Dt(W),!0)}let oe=O(le(He)),n=O(le(new(e(oe))));function K(){$(te,Ct(0,e(L).length),!0),$(ae,Ct(0,e(L).length),!0),U()}function ea(){for(const s of x)s.discovered=!1}function U(){ea(),$(n,new(e(oe)),!0),e(n).start(e(L)[e(te)],e(L)[e(ae)])}function Ue(){const s=e(n).step();e(n).trace_path(),(s===Gt.SUCCESS||s===Gt.FAILURE)&&e(Y)&&be()}function Ye(){e(n).solve(),e(n).trace_path()}let Y=O(!1),fe;function be(){$(Y,!e(Y)),e(Y)?fe=setInterval(Ue,100):fe!==void 0&&clearInterval(fe)}va(()=>{let s=ce(),v=!1,d=!1;f.onpointermove=c=>{s=ga(f,c)},f.onpointerdown=c=>{f.setPointerCapture(c.pointerId),v=!0,d=!0},f.onpointerup=c=>{f.releasePointerCapture(c.pointerId),d=!1},f.width=z,f.height=H;const t=f.getContext("2d");function _(c,b){return xa(c,b.pos)<g.node_radius*2}function p(){let c,b=0;function G(y){c&&(b=Math.min(.02,(y-c)/1e3)),c=y;const m=x.map(i=>({x:0,y:0}));for(const i of ue){const l=We(x[i.source].pos,x[i.target].pos),h=pe(l),R=(i.weight*g.zoom-h)*g.spring_stiffness;B(m[i.source],C(l,R/pe(l))),B(m[i.target],C(l,-R/pe(l)))}for(const[i,l]of x.entries()){!l.discovered&&e(n).discovered.has(l.node.id)&&(l.discovered=!0);const h=ce(z/2,H/2),R=We(h,l.pos);B(m[i],C(R,g.center_pull));for(const[A,T]of x.entries())if(i<A){const N=We(l.pos,T.pos),j=pe(N),E=g.node_charge/(1+j)**2;B(m[i],C(N,E)),B(m[A],C(N,-E))}}let k=!1;for(const[i,l]of x.entries())!k&&_(s,l)?(v&&(l.grabbed=!0),l.hovered=!0,k=!0):l.hovered=!1,d||(l.grabbed=!1),(e(D)||l.discovered)&&l.grabbed&&d?l.pos=s:(ma(l.vel,1-g.drag),B(l.vel,C(m[i],b)),B(l.pos,C(l.vel,b*g.speed)));t.clearRect(0,0,z,H);for(const i of ue){const l=x[i.source],h=x[i.target];t.save(),(e(D)||l.discovered&&h.discovered)&&(e(n).link_path.includes(i.id)&&(t.strokeStyle="lightcoral",t.lineWidth=4),t.beginPath(),t.moveTo(l.pos.x,l.pos.y),t.lineTo(h.pos.x,h.pos.y),t.stroke()),t.restore()}t.save(),t.shadowBlur=5,t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowColor="rgba(0, 0, 0, 0.2)";for(const i of x){t.fillStyle="white";const l=e(n).is_in_frontier(i.node.id);e(n).current&&e(n).current.state.node.id===i.node.id?e(n).goal&&e(n).goal.node.id===i.node.id?t.fillStyle="green":t.fillStyle="red":e(n).node_path.includes(i.node.id)?t.fillStyle="lightcoral":e(n).goal&&e(n).goal.node.id===i.node.id?t.fillStyle="lightgreen":l?t.fillStyle="lightblue":e(n).reached.has(i.node.id)?t.fillStyle="black":e(n).branch_roots.has(i.node.id)&&(t.fillStyle="orange"),(e(D)||i.discovered)&&(t.beginPath(),t.ellipse(i.pos.x,i.pos.y,g.node_radius,g.node_radius,0,0,Math.PI*2),t.stroke(),t.fill(),i.grabbed&&(t.beginPath(),t.ellipse(i.pos.x,i.pos.y,g.node_radius*2,g.node_radius*2,0,0,Math.PI*2),t.stroke()),t.save(),(i.hovered||i.grabbed)&&(t.beginPath(),t.fillStyle="yellow",t.ellipse(i.pos.x,i.pos.y,g.node_radius,g.node_radius,0,0,Math.PI*2),t.fill()),t.restore())}t.restore(),t.textAlign="center",t.textBaseline="middle",t.save();for(const i of x)(e(D)||i.discovered)&&t.fillText(i.node.name,i.pos.x,i.pos.y-g.node_radius*2);t.restore(),v=!1,requestAnimationFrame(G)}G(0)}p()}),K();var he=Na(),ge=r(he),me=a(r(ge),2),qe=r(me);qe.__click=K;var Ve=a(qe,2);Ve.__click=[ya,K,Ye];var Xe=a(Ve,2);Xe.__click=[wa,K,be];var q=a(Xe,2);q.__change=[Sa,Ke,F,K];var xe=r(q),Je={},ye=a(xe),Qe={},we=a(ye),Ze={},et=a(we),tt={};o(q);var at=a(q,2),ot=a(r(at));fa(ot),o(at),o(me);var ta=a(me,2);ha(ta,s=>f=s,()=>f),o(ge);var rt=a(ge,2),Se=r(rt),it=r(Se);it.__click=U;var st=a(it,2);st.__click=Ue;var lt=a(st,2);lt.__click=Ye;var ke=a(lt,2);ke.__click=be;var re=a(ke,2);re.__change=U;var Re=r(re),nt=r(Re),vt={};o(Re);var Ae=a(Re),$e=r(Ae),dt={},Ie=a($e,2),_t={},Te=a(Ie,2),ct={},pt=a(Te,2),ut={};o(Ae);var Ee=a(Ae),ft=r(Ee),bt={};o(Ee);var ht=a(Ee),Oe=r(ht),gt={},Me=a(Oe,2),mt={},Le=a(Me,2),xt={},Ne=a(Le,2),yt={},wt=a(Ne,2),St={};o(ht),o(re),o(Se);var Pe=a(Se,2),V=r(Pe);V.__change=U,Q(V,21,()=>e(L).entries(),Z,(s,v)=>{var d=je(()=>ze(e(v),2));let t=()=>e(d)[0],_=()=>e(d)[1];var p=ka(),c=r(p);o(p);var b={};I(()=>{u(c,`${_().node.id??""} : ${_().node.name??""}`),b!==(b=t())&&(p.value=(p.__value=t())??"")}),w(s,p)}),o(V);var ie=a(V,4);ie.__change=U,Q(ie,21,()=>e(L).entries(),Z,(s,v)=>{var d=je(()=>ze(e(v),2));let t=()=>e(d)[0],_=()=>e(d)[1];var p=Ra(),c=r(p);o(p);var b={};I(()=>{u(c,`${_().node.id??""} : ${_().node.name??""}`),b!==(b=t())&&(p.value=(p.__value=t())??"")}),w(s,p)}),o(ie),o(Pe);var Be=a(Pe,2),Ce=r(Be),kt=a(r(Ce)),aa=r(kt,!0);o(kt),o(Ce);var Fe=a(Ce,2),Rt=a(r(Fe)),oa=r(Rt,!0);o(Rt),o(Fe);var At=a(Fe,2),$t=a(r(At)),ra=r($t,!0);o($t),o(At),o(Be);var It=a(Be,2),De=r(It),Tt=a(r(De),2),Et=r(Tt);Q(Et,21,()=>e(n).frontier,Z,(s,v)=>{var d=Aa(),t=r(d);P(t,"color: lightblue");var _=a(t),p=r(_,!0);o(_);var c=a(_),b=r(c),G=r(b,!0);o(b);var y=a(b,2),m=r(y,!0);o(y),o(c);var k=a(c,2),i=r(k,!0);o(k),o(d),I((l,h)=>{u(p,e(v).state.node.name),u(G,e(v).path_cost),u(m,l),u(i,h)},[()=>e(v).heuristic.toFixed(1),()=>(e(v).path_cost+e(v).heuristic).toFixed(1)]),w(s,d)}),o(Et),o(Tt),o(De);var Ge=a(De,2),Ot=a(r(Ge),2),Mt=r(Ot);Q(Mt,21,()=>e(n).reached.values(),Z,(s,v)=>{var d=$a(),t=a(r(d)),_=r(t,!0);o(t);var p=a(t),c=r(p,!0);o(p),o(d),I(()=>{u(_,e(v).state.node.name),u(c,e(v).path_cost)}),w(s,d)}),o(Mt),o(Ot),o(Ge);var Lt=a(Ge,2),Nt=a(r(Lt),2),Pt=r(Nt);{var ia=s=>{var v=Ia(),d=ne(v),t=r(d);P(t,"color: lightgreen");var _=a(t);o(d),ca(2),I(()=>u(_,` ${e(n).goal?.node.name??""}`)),w(s,v)};ve(Pt,s=>{e(n).current?.state.node.id!==e(n).goal?.node.id&&s(ia)})}var Bt=a(Pt,2);Q(Bt,17,()=>e(n).full_path.entries(),Z,(s,v)=>{var d=je(()=>ze(e(v),2));let t=()=>e(d)[0],_=()=>e(d)[1];var p=Ma(),c=r(p);{var b=y=>{var m=Ta(),k=r(m),i=a(k);o(m),I(()=>{P(k,`color: ${t()===0?"red":"lightcoral"}`),u(i,` ${_().state.node.name??""}`)}),w(y,m)},G=y=>{var m=pa(),k=ne(m);{var i=h=>{var R=Ea(),A=ne(R),T=r(A);P(T,"color: green");var N=a(T);o(A);var j=a(A,2),E=a(r(j)),X=r(E),J=a(X),se=r(J,!0);o(J),o(E),o(j),I(()=>{u(N,` ${_().state.node.name??""}`),u(X,`+${(_().action?.weight||0)??""} = `),u(se,_().real_path_cost)}),w(h,R)},l=h=>{var R=Oa(),A=ne(R),T=r(A),N=r(T);o(T);var j=a(T);o(A);var E=a(A,2),X=a(r(E)),J=r(X),se=a(J),na=r(se,!0);o(se),o(X),o(E),I(()=>{P(T,`color: ${t()===0?"red":"lightcoral"}`),u(N,`${t()===0?"CURRENT":""} ●`),u(j,` ${_().state.node.name??""}`),u(J,`+${(_().action?.weight||0)??""} = `),u(na,_().real_path_cost)}),w(h,R)};ve(k,h=>{t()===0&&e(n).goal?.node.id===e(n).current?.state.node.id?h(i):h(l,!1)},!0)}w(y,m)};ve(c,y=>{t()===e(n).full_path.length-1?y(b):y(G,!1)})}o(p),w(s,p)});var sa=a(Bt,2);{var la=s=>{var v=La(),d=r(v);P(d,"color: red");var t=a(d);o(v),I(()=>u(t,` ${(e(n).current?.state.node.name||"no start node")??""}`)),w(s,v)};ve(sa,s=>{e(n).full_path.length===0&&s(la)})}o(Nt),o(Lt),o(It),o(rt),o(he),I(()=>{Je!==(Je=jt)&&(xe.value=(xe.__value=jt)??""),Qe!==(Qe=_e)&&(ye.value=(ye.__value=_e)??""),Ze!==(Ze=zt)&&(we.value=(we.__value=zt)??""),tt!==(tt=Ht)&&(et.value=(et.__value=Ht)??""),P(ke,`${e(Y)?"background-color: lightcoral":""};`),vt!==(vt=Wt)&&(nt.value=(nt.__value=Wt)??""),dt!==(dt=Kt)&&($e.value=($e.__value=Kt)??""),_t!==(_t=Ut)&&(Ie.value=(Ie.__value=Ut)??""),ct!==(ct=Yt)&&(Te.value=(Te.__value=Yt)??""),ut!==(ut=qt)&&(pt.value=(pt.__value=qt)??""),bt!==(bt=Vt)&&(ft.value=(ft.__value=Vt)??""),gt!==(gt=Xt)&&(Oe.value=(Oe.__value=Xt)??""),mt!==(mt=He)&&(Me.value=(Me.__value=He)??""),xt!==(xt=Jt)&&(Le.value=(Le.__value=Jt)??""),yt!==(yt=Qt)&&(Ne.value=(Ne.__value=Qt)??""),St!==(St=Zt)&&(wt.value=(wt.__value=Zt)??""),u(aa,e(n).step_count),u(oa,e(n).frontier_size),u(ra,e(n).reached_size)}),de(q,()=>e(F),s=>$(F,s)),ba(ot,()=>e(D),s=>$(D,s)),de(re,()=>e(oe),s=>$(oe,s)),de(V,()=>e(te),s=>$(te,s)),de(ie,()=>e(ae),s=>$(ae,s)),w(ee,he),_a()}ua(["click","change"]);export{Va as component};

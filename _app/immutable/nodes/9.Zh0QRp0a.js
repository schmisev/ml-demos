import"../chunks/DsnmJJEf.js";import{o as sa}from"../chunks/Cnrimmix.js";import{p as la,s as O,a as le,g as e,h as A,f as S,c as r,b as a,t as I,d as w,e as na,r as o,j as Ge,k as ne,n as va,l as da,m as je}from"../chunks/4GbpYj1Z.js";import{d as _a,s as u}from"../chunks/BtTk71Kd.js";import{i as ve}from"../chunks/C-F78KSZ.js";import{e as Q,i as Z}from"../chunks/C_cjGUXz.js";import{r as ca}from"../chunks/CG_wtlq_.js";import{s as B}from"../chunks/B00MqyoI.js";import{a as pa}from"../chunks/D7mxgv5f.js";import{b as de}from"../chunks/D_ZpHD7y.js";import{b as ua}from"../chunks/1gkgI-oG.js";import{a as Bt,r as Ct,g as fa}from"../chunks/CK5eLMkr.js";import{n as Ft,N as _e,O as ze,S as Lt,a as Dt,b as Gt,c as jt,B as zt,d as Ht,e as Wt,A as Kt,D as Ut,I as Yt,f as qt,g as Vt,G as Xt}from"../chunks/C0VN96lD.js";import{v as ce,a as He,b as C,c as F,d as pe,e as ba,f as ha}from"../chunks/D5MljCm_.js";var ga=(ee,M,f)=>{M(),f()},ma=(ee,M,f)=>{M(),f()},xa=(ee,M,f,L)=>{M(e(f)),L()},ya=S("<option> </option>"),wa=S("<option> </option>"),Sa=S('<tr><td class="w-4">●</td><td> </td><td><b style="color: lightcoral;"> </b>+<b style="color: blueviolet;"> </b></td><td>=</td><td> </td></tr>'),ka=S('<tr><td class="w-4">●</td><td> </td><td> </td></tr>'),Ra=S('<div><b>GOAL ●</b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ ···</div>',1),$a=S("<div><b>START ●</b> </div>"),Aa=S('<div><b>GOAL REACHED ●</b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ <span class="text-xs"> <b> </b></span></div>',1),Ia=S('<div><b> </b> </div> <div class="flex flex-row items-center rounded-xl bg-gray-100 pl-4">↑ <span class="text-xs"> <b> </b></span></div>',1),Ta=S('<div class="flex flex-col"><!></div>'),Ea=S("<div><b>START ●</b> </div>"),Oa=S('<div class="grid grid-cols-2 gap-2 p-2"><div class="flex flex-col gap-2"><h1>Search algorithms | <a href="../">back</a></h1> <div class="flex flex-row items-center gap-2 flex-wrap"><button class="border">Random restart</button> <button class="border">Random solve</button> <button class="border">Random autostep</button> <select><option>binary tree</option><option>Romania</option><option>Germany</option><option>Munich</option></select> <label>show undiscovered <input type="checkbox"/></label></div> <canvas class="w-full"></canvas></div> <div class="flex grow flex-col gap-2"><div class="flex flex-row gap-2"><button class="border">Restart</button> <button class="border">Step</button> <button class="border">Solve</button> <button class="border">Autostep</button> <select><optgroup label="Breadth first"><option>naive breadth first</option></optgroup><optgroup label="Best first"><option>best first (Dijkstra)</option> <option>greedy best first</option> <option>A* geo distance</option></optgroup><optgroup label="Depth first"><option>naive depth first</option></optgroup><optgroup label="Iterative deepening"><option>iterative deepening</option> <option>optimistic lookahead</option> <option>dead branch pruning</option> <option>optimistic heuristic</option> <option>greedy heuristic</option></optgroup></select></div> <div class="flex flex-row items-center gap-2"><select></select> <div>→</div> <select></select></div> <div class="light-border flex flex-row gap-2"><div class="border-r-2 pr-2">Steps: <b> </b></div> <div class="border-r-2 pr-2">Maximal frontier size: <b> </b></div> <div>Reached size: <b> </b></div></div> <div class="start flex flex-row items-start justify-evenly gap-2"><div class="light-border flex w-1/3 flex-col gap-2"><h2>frontier</h2> <table><tbody></tbody></table></div> <div class="light-border flex w-1/3 flex-col gap-2"><h2>reached</h2> <table><tbody></tbody></table></div> <div class="light-border flex h-full w-1/3 flex-col gap-2"><h2>current path</h2> <div class="flex grow flex-col"><!> <!> <!></div></div></div></div></div>');function Ua(ee,M){la(M,!0);let f,L=O(le(_e)),D=O(!0),z=700,H=700,te=O(0),ae=O(10),g,W=_e,x,ue,N=O(le(Ft(W)));We(e(L));function We(s){W=s,g=s.physics,x=W.nodes.map(v=>({node:v,pos:ce(Ct(z/4,3*z/4),Ct(H/4,3*H/4)),vel:ce(0,0),grabbed:!1,hovered:!1,discovered:!1})),ue=W.links.map(v=>v),A(N,Ft(W),!0)}let oe=O(le(ze)),n=O(le(new(e(oe))));function K(){A(te,Bt(0,e(N).length),!0),A(ae,Bt(0,e(N).length),!0),U()}function Jt(){for(const s of x)s.discovered=!1}function U(){Jt(),A(n,new(e(oe)),!0),e(n).start(e(N)[e(te)],e(N)[e(ae)])}function Ke(){const s=e(n).step();e(n).trace_path(),(s===Lt.SUCCESS||s===Lt.FAILURE)&&e(Y)&&be()}function Ue(){e(n).solve(),e(n).trace_path()}let Y=O(!1),fe;function be(){A(Y,!e(Y)),e(Y)?fe=setInterval(Ke,100):fe!==void 0&&clearInterval(fe)}sa(()=>{let s=ce(),v=!1,d=!1;f.onpointermove=c=>{s=fa(f,c)},f.onpointerdown=c=>{f.setPointerCapture(c.pointerId),v=!0,d=!0},f.onpointerup=c=>{f.releasePointerCapture(c.pointerId),d=!1},f.width=z,f.height=H;const t=f.getContext("2d");function _(c,b){return ha(c,b.pos)<g.node_radius*2}function p(){let c,b=0;function G(y){c&&(b=Math.min(.02,(y-c)/1e3)),c=y;const m=x.map(i=>({x:0,y:0}));for(const i of ue){const l=He(x[i.source].pos,x[i.target].pos),h=pe(l),R=(i.weight*g.zoom-h)*g.spring_stiffness;C(m[i.source],F(l,R/pe(l))),C(m[i.target],F(l,-R/pe(l)))}for(const[i,l]of x.entries()){!l.discovered&&e(n).discovered.has(l.node.id)&&(l.discovered=!0);const h=ce(z/2,H/2),R=He(h,l.pos);C(m[i],F(R,g.center_pull));for(const[$,T]of x.entries())if(i<$){const P=He(l.pos,T.pos),j=pe(P),E=g.node_charge/(1+j)**2;C(m[i],F(P,E)),C(m[$],F(P,-E))}}let k=!1;for(const[i,l]of x.entries())!k&&_(s,l)?(v&&(l.grabbed=!0),l.hovered=!0,k=!0):l.hovered=!1,d||(l.grabbed=!1),(e(D)||l.discovered)&&l.grabbed&&d?l.pos=s:(ba(l.vel,1-g.drag),C(l.vel,F(m[i],b)),C(l.pos,F(l.vel,b*g.speed)));t.clearRect(0,0,z,H);for(const i of ue){const l=x[i.source],h=x[i.target];t.save(),(e(D)||l.discovered&&h.discovered)&&(e(n).link_path.includes(i.id)&&(t.strokeStyle="lightcoral",t.lineWidth=4),t.beginPath(),t.moveTo(l.pos.x,l.pos.y),t.lineTo(h.pos.x,h.pos.y),t.stroke()),t.restore()}t.save(),t.shadowBlur=5,t.shadowOffsetX=2,t.shadowOffsetY=2,t.shadowColor="rgba(0, 0, 0, 0.2)";for(const i of x){t.fillStyle="white";const l=e(n).is_in_frontier(i.node.id);e(n).current&&e(n).current.state.node.id===i.node.id?e(n).goal&&e(n).goal.node.id===i.node.id?t.fillStyle="green":t.fillStyle="red":e(n).node_path.includes(i.node.id)?t.fillStyle="lightcoral":e(n).goal&&e(n).goal.node.id===i.node.id?t.fillStyle="lightgreen":l?t.fillStyle="lightblue":e(n).reached.has(i.node.id)?t.fillStyle="black":e(n).branch_roots.has(i.node.id)&&(t.fillStyle="orange"),(e(D)||i.discovered)&&(t.beginPath(),t.ellipse(i.pos.x,i.pos.y,g.node_radius,g.node_radius,0,0,Math.PI*2),t.stroke(),t.fill(),i.grabbed&&(t.beginPath(),t.ellipse(i.pos.x,i.pos.y,g.node_radius*2,g.node_radius*2,0,0,Math.PI*2),t.stroke()),t.save(),(i.hovered||i.grabbed)&&(t.beginPath(),t.fillStyle="yellow",t.ellipse(i.pos.x,i.pos.y,g.node_radius,g.node_radius,0,0,Math.PI*2),t.fill()),t.restore())}t.restore(),t.textAlign="center",t.textBaseline="middle",t.save();for(const i of x)(e(D)||i.discovered)&&t.fillText(i.node.name,i.pos.x,i.pos.y-g.node_radius*2);t.restore(),v=!1,requestAnimationFrame(G)}G(0)}p()}),K();var he=Oa(),ge=r(he),me=a(r(ge),2),Ye=r(me);Ye.__click=K;var qe=a(Ye,2);qe.__click=[ga,K,Ue];var Ve=a(qe,2);Ve.__click=[ma,K,be];var q=a(Ve,2);q.__change=[xa,We,L,K];var xe=r(q),Xe={},ye=a(xe),Je={},we=a(ye),Qe={},Ze=a(we),et={};o(q);var tt=a(q,2),at=a(r(tt));ca(at),o(tt),o(me);var Qt=a(me,2);ua(Qt,s=>f=s,()=>f),o(ge);var ot=a(ge,2),Se=r(ot),rt=r(Se);rt.__click=U;var it=a(rt,2);it.__click=Ke;var st=a(it,2);st.__click=Ue;var ke=a(st,2);ke.__click=be;var re=a(ke,2);re.__change=U;var Re=r(re),lt=r(Re),nt={};o(Re);var $e=a(Re),Ae=r($e),vt={},Ie=a(Ae,2),dt={},_t=a(Ie,2),ct={};o($e);var Te=a($e),pt=r(Te),ut={};o(Te);var ft=a(Te),Ee=r(ft),bt={},Oe=a(Ee,2),ht={},Me=a(Oe,2),gt={},Ne=a(Me,2),mt={},xt=a(Ne,2),yt={};o(ft),o(re),o(Se);var Pe=a(Se,2),V=r(Pe);V.__change=U,Q(V,21,()=>e(N).entries(),Z,(s,v)=>{var d=Ge(()=>je(e(v),2));let t=()=>e(d)[0],_=()=>e(d)[1];var p=ya(),c=r(p);o(p);var b={};I(()=>{u(c,`${_().node.id??""} : ${_().node.name??""}`),b!==(b=t())&&(p.value=(p.__value=t())??"")}),w(s,p)}),o(V);var ie=a(V,4);ie.__change=U,Q(ie,21,()=>e(N).entries(),Z,(s,v)=>{var d=Ge(()=>je(e(v),2));let t=()=>e(d)[0],_=()=>e(d)[1];var p=wa(),c=r(p);o(p);var b={};I(()=>{u(c,`${_().node.id??""} : ${_().node.name??""}`),b!==(b=t())&&(p.value=(p.__value=t())??"")}),w(s,p)}),o(ie),o(Pe);var Be=a(Pe,2),Ce=r(Be),wt=a(r(Ce)),Zt=r(wt,!0);o(wt),o(Ce);var Fe=a(Ce,2),St=a(r(Fe)),ea=r(St,!0);o(St),o(Fe);var kt=a(Fe,2),Rt=a(r(kt)),ta=r(Rt,!0);o(Rt),o(kt),o(Be);var $t=a(Be,2),Le=r($t),At=a(r(Le),2),It=r(At);Q(It,21,()=>e(n).frontier,Z,(s,v)=>{var d=Sa(),t=r(d);B(t,"color: lightblue");var _=a(t),p=r(_,!0);o(_);var c=a(_),b=r(c),G=r(b,!0);o(b);var y=a(b,2),m=r(y,!0);o(y),o(c);var k=a(c,2),i=r(k,!0);o(k),o(d),I((l,h)=>{u(p,e(v).state.node.name),u(G,e(v).path_cost),u(m,l),u(i,h)},[()=>e(v).heuristic.toFixed(1),()=>(e(v).path_cost+e(v).heuristic).toFixed(1)]),w(s,d)}),o(It),o(At),o(Le);var De=a(Le,2),Tt=a(r(De),2),Et=r(Tt);Q(Et,21,()=>e(n).reached.values(),Z,(s,v)=>{var d=ka(),t=a(r(d)),_=r(t,!0);o(t);var p=a(t),c=r(p,!0);o(p),o(d),I(()=>{u(_,e(v).state.node.name),u(c,e(v).path_cost)}),w(s,d)}),o(Et),o(Tt),o(De);var Ot=a(De,2),Mt=a(r(Ot),2),Nt=r(Mt);{var aa=s=>{var v=Ra(),d=ne(v),t=r(d);B(t,"color: lightgreen");var _=a(t);o(d),va(2),I(()=>u(_,` ${e(n).goal?.node.name??""}`)),w(s,v)};ve(Nt,s=>{e(n).current?.state.node.id!==e(n).goal?.node.id&&s(aa)})}var Pt=a(Nt,2);Q(Pt,17,()=>e(n).full_path.entries(),Z,(s,v)=>{var d=Ge(()=>je(e(v),2));let t=()=>e(d)[0],_=()=>e(d)[1];var p=Ta(),c=r(p);{var b=y=>{var m=$a(),k=r(m),i=a(k);o(m),I(()=>{B(k,`color: ${t()===0?"red":"lightcoral"}`),u(i,` ${_().state.node.name??""}`)}),w(y,m)},G=y=>{var m=da(),k=ne(m);{var i=h=>{var R=Aa(),$=ne(R),T=r($);B(T,"color: green");var P=a(T);o($);var j=a($,2),E=a(r(j)),X=r(E),J=a(X),se=r(J,!0);o(J),o(E),o(j),I(()=>{u(P,` ${_().state.node.name??""}`),u(X,`+${(_().action?.weight||0)??""} = `),u(se,_().real_path_cost)}),w(h,R)},l=h=>{var R=Ia(),$=ne(R),T=r($),P=r(T);o(T);var j=a(T);o($);var E=a($,2),X=a(r(E)),J=r(X),se=a(J),ia=r(se,!0);o(se),o(X),o(E),I(()=>{B(T,`color: ${t()===0?"red":"lightcoral"}`),u(P,`${t()===0?"CURRENT":""} ●`),u(j,` ${_().state.node.name??""}`),u(J,`+${(_().action?.weight||0)??""} = `),u(ia,_().real_path_cost)}),w(h,R)};ve(k,h=>{t()===0&&e(n).goal?.node.id===e(n).current?.state.node.id?h(i):h(l,!1)},!0)}w(y,m)};ve(c,y=>{t()===e(n).full_path.length-1?y(b):y(G,!1)})}o(p),w(s,p)});var oa=a(Pt,2);{var ra=s=>{var v=Ea(),d=r(v);B(d,"color: red");var t=a(d);o(v),I(()=>u(t,` ${(e(n).current?.state.node.name||"no start node")??""}`)),w(s,v)};ve(oa,s=>{e(n).full_path.length===0&&s(ra)})}o(Mt),o(Ot),o($t),o(ot),o(he),I(()=>{Xe!==(Xe=Dt)&&(xe.value=(xe.__value=Dt)??""),Je!==(Je=_e)&&(ye.value=(ye.__value=_e)??""),Qe!==(Qe=Gt)&&(we.value=(we.__value=Gt)??""),et!==(et=jt)&&(Ze.value=(Ze.__value=jt)??""),B(ke,`${e(Y)?"background-color: lightcoral":""};`),nt!==(nt=zt)&&(lt.value=(lt.__value=zt)??""),vt!==(vt=Ht)&&(Ae.value=(Ae.__value=Ht)??""),dt!==(dt=Wt)&&(Ie.value=(Ie.__value=Wt)??""),ct!==(ct=Kt)&&(_t.value=(_t.__value=Kt)??""),ut!==(ut=Ut)&&(pt.value=(pt.__value=Ut)??""),bt!==(bt=Yt)&&(Ee.value=(Ee.__value=Yt)??""),ht!==(ht=ze)&&(Oe.value=(Oe.__value=ze)??""),gt!==(gt=qt)&&(Me.value=(Me.__value=qt)??""),mt!==(mt=Vt)&&(Ne.value=(Ne.__value=Vt)??""),yt!==(yt=Xt)&&(xt.value=(xt.__value=Xt)??""),u(Zt,e(n).step_count),u(ea,e(n).frontier_size),u(ta,e(n).reached_size)}),de(q,()=>e(L),s=>A(L,s)),pa(at,()=>e(D),s=>A(D,s)),de(re,()=>e(oe),s=>A(oe,s)),de(V,()=>e(te),s=>A(te,s)),de(ie,()=>e(ae),s=>A(ae,s)),w(ee,he),na()}_a(["click","change"]);export{Ua as component};
